# Generated by Django 6.0 on 2025-12-05 19:34

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('accounts', '0003_initial'),
        ('assets', '0001_initial'),
        ('fx', '0001_initial'),
        ('users', '0001_initial'),
    ]

    operations = [
        migrations.AddField(
            model_name='assettype',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='users.profile'),
        ),
        migrations.AddField(
            model_name='asset',
            name='asset_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='assets', to='assets.assettype'),
        ),
        migrations.AddField(
            model_name='bonddetail',
            name='asset',
            field=models.OneToOneField(limit_choices_to={'asset_type': 'bond'}, on_delete=django.db.models.deletion.CASCADE, related_name='bond_detail', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='cryptodetail',
            name='asset',
            field=models.OneToOneField(limit_choices_to={'asset_type__domain': 'crypto'}, on_delete=django.db.models.deletion.CASCADE, related_name='crypto_detail', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='equitydetail',
            name='asset',
            field=models.OneToOneField(limit_choices_to={'asset_type__domain': 'equity'}, on_delete=django.db.models.deletion.CASCADE, related_name='equity_detail', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='equitydetail',
            name='country',
            field=models.ForeignKey(blank=True, help_text='Country of primary listing (ISO-3166).', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='equity_listings', to='fx.country'),
        ),
        migrations.AddField(
            model_name='holding',
            name='account',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='holdings', to='accounts.account'),
        ),
        migrations.AddField(
            model_name='holding',
            name='asset',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='holdings', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='marketdatacache',
            name='asset',
            field=models.OneToOneField(limit_choices_to={'asset_type__domain__in': ['equity', 'crypto', 'bond', 'metal']}, on_delete=django.db.models.deletion.CASCADE, related_name='market_data', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='metaldetail',
            name='asset',
            field=models.OneToOneField(limit_choices_to={'asset_type': 'metal'}, on_delete=django.db.models.deletion.CASCADE, related_name='metal_detail', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='realestatedetail',
            name='asset',
            field=models.OneToOneField(limit_choices_to={'asset_type': 'real_estate'}, on_delete=django.db.models.deletion.CASCADE, related_name='real_estate_detail', to='assets.asset'),
        ),
        migrations.AddField(
            model_name='realestatedetail',
            name='country',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='real_estate_properties', to='fx.country'),
        ),
        migrations.AddField(
            model_name='realestatetype',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='custom_property_types', to='users.profile'),
        ),
        migrations.AddField(
            model_name='realestatedetail',
            name='property_type',
            field=models.ForeignKey(blank=True, help_text='Category of real estate asset (e.g. Single-Family, Duplex, Commercial).', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='properties', to='assets.realestatetype'),
        ),
        migrations.AddIndex(
            model_name='assetidentifier',
            index=models.Index(fields=['id_type', 'value'], name='assets_asse_id_type_ef670d_idx'),
        ),
        migrations.AddIndex(
            model_name='assetidentifier',
            index=models.Index(fields=['asset', 'is_primary'], name='assets_asse_asset_i_a4c149_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='assetidentifier',
            unique_together={('id_type', 'value')},
        ),
        migrations.AddIndex(
            model_name='asset',
            index=models.Index(fields=['asset_type'], name='assets_asse_asset_t_22f697_idx'),
        ),
        migrations.AddConstraint(
            model_name='bonddetail',
            constraint=models.UniqueConstraint(condition=models.Q(('isin', None), _negated=True), fields=('isin',), name='uniq_bond_isin'),
        ),
        migrations.AddConstraint(
            model_name='bonddetail',
            constraint=models.UniqueConstraint(condition=models.Q(('cusip', None), _negated=True), fields=('cusip',), name='uniq_bond_cusip'),
        ),
        migrations.AddIndex(
            model_name='equitydetail',
            index=models.Index(fields=['exchange'], name='assets_equi_exchang_77d1b8_idx'),
        ),
        migrations.AddIndex(
            model_name='equitydetail',
            index=models.Index(fields=['is_etf'], name='assets_equi_is_etf_e22122_idx'),
        ),
        migrations.AddIndex(
            model_name='equitydetail',
            index=models.Index(fields=['is_mutual_fund'], name='assets_equi_is_mutu_832740_idx'),
        ),
        migrations.AddConstraint(
            model_name='equitydetail',
            constraint=models.UniqueConstraint(fields=('asset',), name='unique_equity_detail_asset'),
        ),
        migrations.AlterUniqueTogether(
            name='holding',
            unique_together={('account', 'asset')},
        ),
        migrations.AddIndex(
            model_name='marketdatacache',
            index=models.Index(fields=['last_synced'], name='assets_mark_last_sy_0025e7_idx'),
        ),
        migrations.AddIndex(
            model_name='marketdatacache',
            index=models.Index(fields=['asset'], name='assets_mark_asset_i_1d37f7_idx'),
        ),
        migrations.AddIndex(
            model_name='metaldetail',
            index=models.Index(fields=['currency'], name='assets_meta_currenc_54055a_idx'),
        ),
        migrations.AddIndex(
            model_name='metaldetail',
            index=models.Index(fields=['is_custom'], name='assets_meta_is_cust_43d0e6_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='realestatetype',
            unique_together={('name', 'created_by')},
        ),
        migrations.AddIndex(
            model_name='realestatedetail',
            index=models.Index(fields=['city'], name='assets_real_city_a30812_idx'),
        ),
        migrations.AddIndex(
            model_name='realestatedetail',
            index=models.Index(fields=['region'], name='assets_real_region_180917_idx'),
        ),
        migrations.AddIndex(
            model_name='realestatedetail',
            index=models.Index(fields=['country'], name='assets_real_country_55fc7d_idx'),
        ),
    ]
